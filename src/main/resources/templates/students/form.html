<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{/layout/layout}" th:with="title='Cadastro'" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta th:insert="~{/fragments/custom-headfiles :: register-headfiles(title='Cadastrar-se')}">
    <title>Registrar-se</title>
</head>

<body>
<main layout:fragment="content">
    <div class="card-main">
        <div class="main-content inter-font-line">
            <h1 class="title-page">Cadastrar-se</h1>

            <form th:action="@{/student/save}" method="post" th:object="${student}">
                <input id="input-id" class="input-form" type="hidden" th:field="*{id}"/>

                <fieldset class="fieldset-info">
                    <legend class="fieldset-legend">Informações Pessoais</legend>

                    <div class="form-group">
                        <label class="label-form" for="input-name">Nome *</label>
                        <input class="input-form" id="input-name" placeholder="Seu nome completo" th:field="*{name}" type="text"/>
                        <span th:if="${#fields.hasErrors('name')}" class="alerta" th:text="${#fields.errors('name').getFirst()}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-enrollment">Matrícula *</label>
                        <input id="input-enrollment" name="enrollment" class="input-form" placeholder="Sua matrícula" type="text" th:field="*{enrollment}"/>
                        <span th:if="${#fields.hasErrors('enrollment')}" class="alerta"  th:text="${#fields.errors('enrollment').getFirst()}"></span>
                        <span th:if="${enrollmentError}" th:text="${enrollmentError}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-course">Curso *</label>
                        <input id="input-course" placeholder="Nome do curso" class="input-form" type="text" th:field="*{course}"/>
                        <span th:if="${#fields.hasErrors('course')}" class="alerta" th:text="${#fields.errors('course').getFirst()}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="birthdate">Data de Nascimento *</label>
                        <input class="input-form" type="date" id="birthdate" th:field="*{birthdate}"/>
                        <span th:if="${#fields.hasErrors('birthdate')}" class="alerta" th:text="${#fields.errors('birthdate').getFirst()}"></span>
                        <span th:if="${birthdateError}"  th:text="${birthdateError}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="phoneNumberInput">Telefone *</label>
                        <input type="tel" id="phoneNumberInput" class="input-form" placeholder="Telefone" th:field="*{phoneNumber}"/>
                        <span th:if="${#fields.hasErrors('phoneNumber')}" class="alerta" th:text="${#fields.errors('phoneNumber').getFirst()}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-username">Nome de Usuário *</label>
                        <input id="input-username" name="username" class="input-form" placeholder="Nome de usuário" type="text" th:field="*{user.username}"/>
                        <span th:if="${#fields.hasErrors('user.username')}" class="alerta" th:text="${#fields.errors('user.username').getFirst()}"></span>
                        <span th:if="${usernameError}" th:text="${usernameError}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-email">Email *</label>
                        <input id="input-email" class="input-form" placeholder="Seu email" type="email" th:field="*{user.email}"/>
                        <span th:if="${#fields.hasErrors('user.email')}" class="alerta" th:text="${#fields.errors('user.email').getFirst()}"></span>
                        <span th:if="${emailError}" th:text="${emailError}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-password">Senha *</label>
                        <input class="input-form" id="input-password" name="password" placeholder="Senha" th:field="*{user.password}" type="password"/>
                        <span th:if="${#fields.hasErrors('user.password')}" class="alerta" th:text="${#fields.errors('user.password').getFirst()}"></span>
                    </div>

                    <div class="form-group">
                        <label class="label-form" for="input-password-confirm">Confirme a Senha *</label>
                        <input id="input-password-confirm" class="input-form" placeholder="Confirme sua senha" type="password"/>
                        <span id="password-error" class="error-message" style="display: none; color: red;">
                            As senhas não coincidem. Por favor, verifique.
                        </span>
                    </div>
                </fieldset>

                <fieldset class="fieldset-info">
                    <legend class="fieldset-legend">Suas Competências</legend>
                    <div class="d-flex flex-wrap align-items-center justify-content-center">
                        <label class="checkBox-box" th:each="competence : ${competences}">
                            <input type="checkbox" th:field="*{competenceList}" th:value="${competence.id}"/>
                            <span class="checkmark"></span>
                            <span th:text="${competence.description}"></span>
                        </label>
                    </div>
                </fieldset>

                <div class="buttons-actions">
                    <input class="submit-input" type="submit" value="Salvar">
                </div>
            </form>
        </div>
    </div>
</main>
</body>
</html>